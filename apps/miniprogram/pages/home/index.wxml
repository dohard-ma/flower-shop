<!-- å•†å“åˆ—è¡¨é¡µé¢ -->
<view class="container">
    <view class="header">
        <image src="/assets/logo.png" mode="widthFix" class="logo" />
    </view>
    <!-- æœç´¢æ  -->
    <view class="search-bar">
        <view class="search-input-wrapper">
            <input class="search-input" placeholder="æœç´¢å•†å“åç§°æˆ–èŠ±æ..." value="{{searchValue}}" bindinput="onSearchInput" bindconfirm="onSearchConfirm" />
            <text class="search-icon">ğŸ”</text>
        </view>
    </view>
    <!-- åˆ†ç±»ç­›é€‰æ ‡ç­¾ -->
    <scroll-view class="category-tabs" scroll-x="true" show-scrollbar="false">
        <view class="tabs-wrapper">
            <view wx:for="{{categories}}" wx:key="value" class="tab-item {{currentCategory === item.value ? 'active' : ''}}" data-category="{{item.value}}" bindtap="onCategoryChange">
                {{item.label}}
            </view>
        </view>
    </scroll-view>
    <!-- å•†å“åˆ—è¡¨ -->
    <view class="product-list">
        <view wx:if="{{loading}}" class="loading">
            <text class="loading-text">åŠ è½½ä¸­...</text>
        </view>
        <view wx:elif="{{products.length === 0}}" class="empty-state">
            <text class="empty-icon">ğŸ“¦</text>
            <text class="empty-text">æš‚æ— å•†å“</text>
            <text class="empty-desc">æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å•†å“</text>
        </view>
        <view wx:else class="product-grid">
            <view wx:for="{{filteredProducts}}" wx:key="id" class="product-card" data-product="{{item}}" bindtap="onProductTap">
                <!-- å•†å“å›¾ç‰‡ -->
                <view class="product-image-wrapper">
                    <image class="product-image" src="{{item.images[0] || '/assets/placeholder.png'}}" mode="aspectFill" lazy-load="true" />
                    <!-- çŠ¶æ€æ ‡ç­¾ -->
                    <view class="status-badge {{item.status === 'ACTIVE' ? 'active' : 'inactive'}}">
                        {{item.status === 'ACTIVE' ? 'åœ¨å”®' : 'ä¸‹æ¶'}}
                    </view>
                    <!-- åˆ†ç±»æ ‡ç­¾ -->
                    <view class="category-badge">{{getCategoryLabel(item.category)}}</view>
                </view>
                <!-- å•†å“ä¿¡æ¯ -->
                <view class="product-info">
                    <view class="product-name">{{item.name}}</view>
                    <view class="product-desc">{{item.description || 'æš‚æ— æè¿°'}}</view>
                    <!-- èŠ±æä¿¡æ¯ -->
                    <view wx:if="{{item.materials && item.materials.length > 0}}" class="materials">
                        <text class="materials-label">èŠ±æï¼š</text>
                        <text class="materials-text">{{getMaterialsText(item.materials)}}</text>
                    </view>
                    <!-- ä»·æ ¼ä¿¡æ¯ -->
                    <view class="price-wrapper">
                        <text class="price">{{item.priceRef}}</text>
                        <text class="sort-order">åºå·ï¼š{{item.sortOrder}}</text>
                    </view>
                    <!-- æ›´æ–°æ—¶é—´ -->
                    <view class="update-time">{{formatTime(item.updatedAt)}}</view>
                </view>
            </view>
        </view>
    </view>
    <!-- åŠ è½½æ›´å¤š -->
    <view wx:if="{{hasMore && !loading}}" class="load-more">
        <view class="load-more-btn" bindtap="loadMore">åŠ è½½æ›´å¤š</view>
    </view>
    <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
    <view wx:if="{{!hasMore && products.length > 0}}" class="no-more">
        <text class="no-more-text">å·²åŠ è½½å…¨éƒ¨å•†å“</text>
    </view>
</view>