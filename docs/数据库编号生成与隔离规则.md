# 数据库编号生成与隔离规则

为了确保编号的防泄密性与分布式安全，执行以下规则：

1. 生成公式

{Store.code} + {TypePrefix} + - + {Hashids(SystemSequence.id)}

Store.code: 店铺标识，如 H。

TypePrefix: 业务前缀，用户为 U，商品为 P。

Hashids: 将全局自增的 id 转换为 4-6 位混淆字符。

1. 运行逻辑 (敬畏现实)

原子领号：后端向 SystemSequence 插入一条空记录并获取返回的 id。

混淆转换：在内存中进行 Hashids 转换（使用私有 Salt）。

持久化：将拼接好的字符串存入业务表的 displayId 字段。

查询：直接根据 displayId 字符串进行唯一索引查询，无需反向解密，性能最优。
